{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Link}from\"react-router-dom\";import\"../Cart/Cart.css\";import cart from\"../../media/images/cart.svg\";import{books}from\"../../books\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const Cart=()=>{const[cartItems,setCartItems]=useState(JSON.parse(localStorage.getItem(\"cart\"))||[]);const cartItemsTitle=Object.keys(cartItems);console.log(cartItemsTitle);const cartItemsCount=Object.values(cartItems);console.log(cartItemsCount);const matchedBooks=books.filter(book=>cartItemsTitle.some(cartItemTitle=>cartItemTitle.includes(book.title)));const totalPrice=matchedBooks.reduce((acc,book)=>{const count=cartItems[book.title];const price=book.price*count;acc+=price;return acc;},0).toFixed(2);// const cartItem=Object(cartItems);\n// console.log(cartItem);\n// useEffect(() => {\n//   const items = JSON.parse(localStorage.getItem(\"cart\")) || [];\n//   console.log(items)\n//   setCartItems(items);\n// }, []);\n// console.log(cartItems_);\n// console.log(cartItems__);\n// console.log(cartItem);\nconst clearCart=()=>{localStorage.removeItem(\"cart\");setCartItems([]);};const handleBuying=()=>{const email=prompt('Please enter your email to connect with you');const isValidEmail=validateEmail(email);if(isValidEmail){alert(\"Good\");// Send request to the server\n}else{alert('Invalid email');}};const validateEmail=email=>{const emailRegex=/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;return emailRegex.test(email);};if(cartItemsTitle.length===0){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"img\",{src:cart,alt:\"Empty Cart\",className:\"cartEmptyLogo d-block shadow-md p-3 mb-2 bg-body rounded text-center\"}),/*#__PURE__*/_jsx(\"p\",{className:\"textCartEmpty\",children:\"Cart empty...\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-outline-dark btn-sm d-block\",id:\"button-back\",children:/*#__PURE__*/_jsx(Link,{to:\"/books\",className:\"link-back text-decoration-none\",children:\"\\u2190 Back\"})})]});}else{return/*#__PURE__*/_jsxs(\"div\",{className:\"block\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"purchaseActive d-block btn btn-secondary shadow-sm p-3 rounded\",onClick:clearCart,disabled:cartItemsTitle.length===0,children:\"Purchase\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-outline-dark btn-sm d-block \",id:\"button-back\",children:/*#__PURE__*/_jsx(Link,{to:\"/books\",className:\"link-back text-decoration-none\",children:\"\\u2190 Back\"})}),/*#__PURE__*/_jsxs(\"table\",{className:\"w-75 mb-5\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"border\",children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border\",children:\"Price ($)\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border\",children:\"Count\"}),/*#__PURE__*/_jsx(\"th\",{className:\"border\",children:\"Total Price ($)\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[matchedBooks.map(book=>{const count=cartItems[book.title];const price=(book.price*count).toFixed(2);// console.log(cartItemsCount)\n// const cartItem_ =\n// const [title, price] = cartItem_.split(\",\");\n// const count = parseInt(price);\n// const count = cartItemsCount.map();\nreturn/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"border\",children:/*#__PURE__*/_jsx(Link,{to:\"/books/\".concat(book.id),className:\"link-book-title\",children:book.title})}),/*#__PURE__*/_jsx(\"td\",{className:\"border\",children:book.price}),/*#__PURE__*/_jsx(\"td\",{className:\"border\",children:count},cartItemsCount.id),/*#__PURE__*/_jsx(\"td\",{className:\"border\",children:price})]},book.id)});}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{colSpan:\"3\"}),/*#__PURE__*/_jsx(\"td\",{className:\"border fw-bold\",children:totalPrice})]})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-outline-dark \",id:\"button\",onClick:handleBuying,children:\"Buy\"})]});}};{/* // {cartItems_.map((item) => ( */}{/* //               <>\r\n              \r\n//                 <tr>\r\n//                   <td>{item}</td> */}// {/*\n//         <td>{item.price}</td>\n//         <td>{item.count}</td>\n//         <td>{item.price * item.count}</td> */}\n{/* //       </tr> */}{/* //     </> */}{/* //   ))} */}{/* // </tbody> */}{/* </table> */}{/* </div> */}{/* ); */}{/* } */}/* {cartItems.length === 0 && (\r\n        <>\r\n          <img\r\n            src={cart}\r\n            alt=\"Empty Cart\"\r\n            className=\"cartEmptyLogo d-block shadow-md p-3 mb-2 bg-body rounded text-center\"\r\n          />\r\n          <p className=\"textCartEmpty\">Cart empty...</p>\r\n        </>\r\n      )} */export default Cart;","map":{"version":3,"names":["React","useState","useEffect","Link","cart","books","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Cart","cartItems","setCartItems","JSON","parse","localStorage","getItem","cartItemsTitle","Object","keys","console","log","cartItemsCount","values","matchedBooks","filter","book","some","cartItemTitle","includes","title","totalPrice","reduce","acc","count","price","toFixed","clearCart","removeItem","handleBuying","email","prompt","isValidEmail","validateEmail","alert","emailRegex","test","length","children","src","alt","className","type","id","to","onClick","disabled","map","concat","colSpan"],"sources":["C:/Users/Олександр/Desktop/frontend/bookstore/my-app/src/Components/Cart/Cart.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"../Cart/Cart.css\";\r\n\r\nimport cart from \"../../media/images/cart.svg\";\r\nimport { books } from \"../../books\";\r\n\r\nconst Cart = () => {\r\n  const [cartItems, setCartItems] = useState(\r\n    JSON.parse(localStorage.getItem(\"cart\")) || []\r\n  );\r\n  const cartItemsTitle = Object.keys(cartItems);\r\n  console.log(cartItemsTitle);\r\n  const cartItemsCount = Object.values(cartItems);\r\n  console.log(cartItemsCount);\r\n\r\n  const matchedBooks = books.filter((book) =>\r\n    cartItemsTitle.some((cartItemTitle) => cartItemTitle.includes(book.title))\r\n  );\r\n  const totalPrice = matchedBooks\r\n    .reduce((acc, book) => {\r\n      const count = cartItems[book.title];\r\n      const price = book.price * count;\r\n      acc += price;\r\n      return acc;\r\n    }, 0)\r\n    .toFixed(2);\r\n  // const cartItem=Object(cartItems);\r\n  // console.log(cartItem);\r\n  // useEffect(() => {\r\n  //   const items = JSON.parse(localStorage.getItem(\"cart\")) || [];\r\n  //   console.log(items)\r\n  //   setCartItems(items);\r\n  // }, []);\r\n  // console.log(cartItems_);\r\n  // console.log(cartItems__);\r\n  // console.log(cartItem);\r\n  const clearCart = () => {\r\n    localStorage.removeItem(\"cart\");\r\n    setCartItems([]);\r\n  };\r\n\r\n  const handleBuying=()=>{\r\n    const email = prompt('Please enter your email to connect with you');\r\n     \r\n    const isValidEmail = validateEmail(email);\r\n    if (isValidEmail) {\r\n      alert(\"Good\");\r\n      // Send request to the server\r\n    } else {\r\n      alert('Invalid email');\r\n    }\r\n  };\r\n\r\n  const validateEmail = (email) => {\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    return emailRegex.test(email);\r\n  };\r\n\r\n  if (cartItemsTitle.length === 0) {\r\n    return (\r\n      <>\r\n        <img\r\n          src={cart}\r\n          alt=\"Empty Cart\"\r\n          className=\"cartEmptyLogo d-block shadow-md p-3 mb-2 bg-body rounded text-center\"\r\n        />\r\n        <p className=\"textCartEmpty\">Cart empty...</p>\r\n        <button\r\n          type=\"button\"\r\n          className=\"btn btn-outline-dark btn-sm d-block\"\r\n          id=\"button-back\"\r\n        >\r\n          <Link to=\"/books\" className=\"link-back text-decoration-none\">\r\n            &larr; Back\r\n          </Link>\r\n        </button>\r\n      </>\r\n    );\r\n  } else {\r\n    return (\r\n      <div className=\"block\">\r\n        <button\r\n          type=\"submit\"\r\n          className=\"purchaseActive d-block btn btn-secondary shadow-sm p-3 rounded\"\r\n          onClick={clearCart}\r\n          disabled={cartItemsTitle.length === 0}\r\n        >\r\n          Purchase\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          className=\"btn btn-outline-dark btn-sm d-block \"\r\n          id=\"button-back\"\r\n        >\r\n          <Link to=\"/books\" className=\"link-back text-decoration-none\">\r\n            &larr; Back\r\n          </Link>\r\n        </button>\r\n\r\n        <table className=\"w-75 mb-5\">\r\n          <thead>\r\n            <tr>\r\n              <th className=\"border\">Name</th>\r\n              <th className=\"border\">Price ($)</th>\r\n              <th className=\"border\">Count</th>\r\n              <th className=\"border\">Total Price ($)</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {matchedBooks.map((book) => {\r\n              const count = cartItems[book.title];\r\n              const price = (book.price * count).toFixed(2);\r\n\r\n              // console.log(cartItemsCount)\r\n              // const cartItem_ =\r\n\r\n              // const [title, price] = cartItem_.split(\",\");\r\n\r\n              // const count = parseInt(price);\r\n              // const count = cartItemsCount.map();\r\n              return (\r\n                <>\r\n                  <tr key={book.id}>\r\n                    <td className=\"border\">\r\n                      <Link\r\n                        to={`/books/${book.id}`}\r\n                        className=\"link-book-title\"\r\n                      >\r\n                        {book.title}\r\n                      </Link>\r\n                    </td>\r\n                    <td className=\"border\">{book.price}</td>\r\n                    <td className=\"border\" key={cartItemsCount.id}>\r\n                      {count}\r\n                    </td>\r\n\r\n                    <td className=\"border\">{price}</td>\r\n                  </tr>\r\n                </>\r\n              );\r\n            })}\r\n            <tr>\r\n              <td colSpan=\"3\"></td>\r\n              <td className=\"border fw-bold\">{totalPrice}</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n        <button type=\"button\" className=\"btn btn-outline-dark \" id=\"button\" onClick={handleBuying}>\r\n          {/* <Link to=\"/books\" className=\"link-back text-decoration-none\"> */}\r\n           Buy\r\n          {/* </Link> */}\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\n{\r\n  /* // {cartItems_.map((item) => ( */\r\n}\r\n{\r\n  /* //               <>\r\n              \r\n//                 <tr>\r\n//                   <td>{item}</td> */\r\n}\r\n// {/*\r\n//         <td>{item.price}</td>\r\n//         <td>{item.count}</td>\r\n//         <td>{item.price * item.count}</td> */}\r\n{\r\n  /* //       </tr> */\r\n}\r\n{\r\n  /* //     </> */\r\n}\r\n{\r\n  /* //   ))} */\r\n}\r\n{\r\n  /* // </tbody> */\r\n}\r\n{\r\n  /* </table> */\r\n}\r\n{\r\n  /* </div> */\r\n}\r\n{\r\n  /* ); */\r\n}\r\n{\r\n  /* } */\r\n}\r\n\r\n/* {cartItems.length === 0 && (\r\n        <>\r\n          <img\r\n            src={cart}\r\n            alt=\"Empty Cart\"\r\n            className=\"cartEmptyLogo d-block shadow-md p-3 mb-2 bg-body rounded text-center\"\r\n          />\r\n          <p className=\"textCartEmpty\">Cart empty...</p>\r\n        </>\r\n      )} */\r\n\r\nexport default Cart;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}