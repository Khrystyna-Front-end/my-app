{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{books}from\"../../../books.js\";import{Link,useParams}from\"react-router-dom\";import\"./BookForm.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BookForm=()=>{const[singleBook,setSingleBook]=useState([]);const[count,setCount]=useState(1);const bookCost=singleBook.price;const[totalBookCost,setTotalBookCost]=useState(bookCost);const{id}=useParams();useEffect(()=>{const findBook=()=>{const newBook=books[id-1];setSingleBook(newBook);};findBook();},[id]);function handleAdding(){let title=singleBook.title;let price=Number(singleBook.price);// let count = Number(count);\nlet book=[title];const cartItems=JSON.parse(localStorage.getItem(\"cart\"))||{};// cartItems.push(book);\ncartItems[book]=Number(count);localStorage.setItem(\"cart\",JSON.stringify(cartItems));localStorage.setItem(\"count\",count);}// Store the count in localStorage\nfunction handleChange(event){event.preventDefault();if(count>0&&count<=42){setTotalBookCost((count*bookCost).toFixed(2));}else{setCount(1);}}return/*#__PURE__*/_jsxs(\"form\",{action:\"#\",method:\"get\",className:\" section price-block col-3 shadow p-3 mb-2 bg-body-tertiary rounded\",id:\"pay-form\",onSubmit:handleChange,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"price-book d-flex justify-content-between mb-3\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"sidebar-title\",children:\"Price,$\"}),/*#__PURE__*/_jsx(\"p\",{className:\"book-cost\",id:\"cost\",children:bookCost},bookCost)]}),/*#__PURE__*/_jsxs(\"section\",{className:\"price d-flex justify-content-between mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"count\",className:\"form-label \",children:\"Count\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"count\",className:\"form-control\",value:count,onKeyup:handleChange,onKeydown:handleChange,onClick:handleChange,onChange:e=>setCount(e.target.value),\"data-test-id\":\"numberInput\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"price-book d-flex justify-content-between mb-5\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"total-price fw-bold fs-5\",children:\"Total price \"}),/*#__PURE__*/_jsx(\"p\",{className:\"total-book-cost\",id:\"total\",children:totalBookCost})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-outline-dark btn-sm d-block \",id:\"button-back\",children:/*#__PURE__*/_jsx(Link,{to:\"/books\",className:\"link-back text-decoration-none\",children:\"\\u2190 Back\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"adding btn btn-info d-block text-end\",id:\"button-adding\",type:\"submit\",onClick:handleAdding,children:\"Add to cart\"})]})]});function changeCount(){setCount(count=>Number(count));}};export default BookForm;","map":{"version":3,"names":["React","useState","useEffect","books","Link","useParams","jsx","_jsx","jsxs","_jsxs","BookForm","singleBook","setSingleBook","count","setCount","bookCost","price","totalBookCost","setTotalBookCost","id","findBook","newBook","handleAdding","title","Number","book","cartItems","JSON","parse","localStorage","getItem","setItem","stringify","handleChange","event","preventDefault","toFixed","action","method","className","onSubmit","children","for","type","value","onKeyup","onKeydown","onClick","onChange","e","target","to","changeCount"],"sources":["C:/Users/Олександр/Desktop/frontend/bookstore/my-app/src/Components/SpecificBook/SpecificBookForm/BookForm.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { books } from \"../../../books.js\";\r\nimport { Link, useParams } from \"react-router-dom\";\r\nimport \"./BookForm.css\";\r\n\r\nconst BookForm = () => {\r\n  const [singleBook, setSingleBook] = useState([]);\r\n  const [count, setCount] = useState(1);\r\n  const bookCost = singleBook.price;\r\n  const [totalBookCost, setTotalBookCost] = useState(bookCost);\r\n\r\n  const { id } = useParams();\r\n  useEffect(() => {\r\n    const findBook = () => {\r\n      const newBook = books[id - 1];\r\n      setSingleBook(newBook);\r\n    };\r\n    findBook();\r\n  }, [id]);\r\n\r\n  function handleAdding() {\r\n    let title = singleBook.title;\r\n    let price = Number(singleBook.price);\r\n    // let count = Number(count);\r\n    let book = [title];\r\n\r\n    const cartItems = JSON.parse(localStorage.getItem(\"cart\")) || {};\r\n\r\n    // cartItems.push(book);\r\n    cartItems[book] = Number(count);\r\n    localStorage.setItem(\"cart\", JSON.stringify(cartItems));\r\n    localStorage.setItem(\"count\", count);\r\n  }\r\n\r\n  // Store the count in localStorage\r\n\r\n  function handleChange(event) {\r\n    event.preventDefault();\r\n\r\n    if (count > 0 && count <= 42) {\r\n      setTotalBookCost((count * bookCost).toFixed(2));\r\n    } else {\r\n      setCount(1);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <form\r\n      action=\"#\"\r\n      method=\"get\"\r\n      className=\" section price-block col-3 shadow p-3 mb-2 bg-body-tertiary rounded\"\r\n      id=\"pay-form\"\r\n      onSubmit={handleChange}\r\n    >\r\n      <div className=\"price-book d-flex justify-content-between mb-3\">\r\n        <h4 className=\"sidebar-title\">Price,$</h4>\r\n        <p className=\"book-cost\" id=\"cost\" key={bookCost}>\r\n          {bookCost}\r\n        </p>\r\n      </div>\r\n      <section className=\"price d-flex justify-content-between mb-3\">\r\n        <label for=\"count\" className=\"form-label \">\r\n          Count\r\n        </label>\r\n        <input\r\n          type=\"number\"\r\n          id=\"count\"\r\n          className=\"form-control\"\r\n          value={count}\r\n          onKeyup={handleChange}\r\n          onKeydown={handleChange}\r\n          onClick={handleChange}\r\n          onChange={(e) => setCount(e.target.value)}\r\n          data-test-id=\"numberInput\"\r\n        />\r\n      </section>\r\n\r\n      <div className=\"price-book d-flex justify-content-between mb-5\">\r\n        <h4 className=\"total-price fw-bold fs-5\">Total price </h4>\r\n        <p className=\"total-book-cost\" id=\"total\">\r\n          {totalBookCost}\r\n        </p>\r\n      </div>\r\n      <div className=\"d-flex justify-content-between\">\r\n        <button\r\n          type=\"button\"\r\n          className=\"btn btn-outline-dark btn-sm d-block \"\r\n          id=\"button-back\"\r\n        >\r\n          <Link to=\"/books\" className=\"link-back text-decoration-none\">\r\n            &larr; Back\r\n          </Link>\r\n        </button>\r\n        <button\r\n          className=\"adding btn btn-info d-block text-end\"\r\n          id=\"button-adding\"\r\n          type=\"submit\"\r\n          onClick={handleAdding}\r\n        >\r\n          Add to cart\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n\r\n  function changeCount() {\r\n    setCount((count) => Number(count));\r\n  }\r\n};\r\n\r\nexport default BookForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}